generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model PatientProfile {
  id               String   @id @default(uuid())
  userId           String   @unique  // Identity userId
  fullName         String?
  phone            String?
  dob              String?  // keep as string for simplicity (YYYY-MM-DD)
  address          String?
  emergencyContact String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model StaffProfile {
  id          String   @id @default(uuid())
  userId      String   @unique  // Identity userId
  fullName    String?
  phone       String?
  department  String?
  licenseNo   String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model VisitNote {
  id            String   @id @default(uuid())
  appointmentId String   // from Scheduling
  patientUserId String   // Identity userId
  staffUserId   String   // Identity userId
  note          String
  createdAt     DateTime @default(now())

  @@index([appointmentId])
  @@index([patientUserId])
  @@index([staffUserId])
}
